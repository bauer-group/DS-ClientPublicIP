name: ðŸš€ Deploy Release to Coolify

on:
  release:
    types: [published]
  workflow_dispatch:

jobs:
  deploy:
    name: ðŸš€ Deploy to Coolify
    runs-on: ubuntu-latest

    steps:
      - name: ðŸš€ Trigger Coolify Deployment
        env:
          COOLIFY_API_TOKEN: ${{ secrets.COOLIFY_API_TOKEN }}
        run: |
          echo "Deploying release ${{ github.event.release.tag_name || 'manual' }} to Coolify..."
          curl -sSf -X GET \
            -H "Authorization: Bearer $COOLIFY_API_TOKEN" \
            "https://0046-20.cloud.bauer-group.com/api/v1/deploy?uuid=h44o4g04s80ssk4kcogskg88&force=false"
          echo "Deployment triggered successfully"
